{"version":3,"sources":["app.es6"],"names":["document","window","location","fetch","router","button","querySelector","close","form","formats","methods","modal","loading","textarea","resBody","json","isJson","childElementCount","setAttribute","options","selectedIndex","value","escape","arg","replace","prepare","html","keys","Array","from","match","matches","concat","replaces","map","includes","i","output","forEach","idx","RegExp","prettify","parentNode","innerHTML","querySelectorAll","val","indexOf","maybeJson","test","JSON","parse","stringify","err","console","warn","message","onsubmit","ev","preventDefault","stopPropagation","requestAnimationFrame","innerText","classList","add","remove","protocol","host","pathname","method","body","credentials","headers","then","res","ok","get","text","data","catch","status","statusText","onchange","css","current","hidden","callback","trigger","onclick","target","onkeyup","log","join"],"mappings":"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","file":"app.js","sourcesContent":["\"use strict\";\n\n(function (document, window, location, fetch, router) {\n\t// Wiring up the request tab\n\tconst button = document.querySelector(\"button\"),\n\t\tclose = document.querySelector(\"#close\"),\n\t\tform = document.querySelector(\"form\"),\n\t\tformats = document.querySelector(\"#formats\"),\n\t\tmethods = document.querySelector(\"#methods\"),\n\t\tmodal = document.querySelector(\".modal\"),\n\t\tloading = modal.querySelector(\".loading\"),\n\t\ttextarea = document.querySelector(\"textarea\"),\n\t\tresBody = modal.querySelector(\".body\"),\n\t\tjson = /^[\\[\\{\"]/,\n\t\tisJson = /application\\/json/;\n\n\tif (methods.childElementCount > 0) {\n\t\tform.setAttribute(\"method\", methods.options[methods.selectedIndex].value);\n\t}\n\n\tfunction escape (arg) {\n\t\treturn arg.replace(/[\\-\\[\\]{}()*+?.,\\\\\\/\\^\\$|#\\s]/g, \"\\\\$&\");\n\t}\n\n\t// Stage 1 of prettifying a <code>\n\tfunction prepare (html) {\n\t\tconst keys = Array.from(html.match(/\\\".*\":/g)),\n\t\t\tmatches = Array.from(keys.concat(html.match(/:\\s(\\\".*\\\"|\\d{3,3}|null)/g))),\n\t\t\treplaces = matches.map(i => keys.includes(i) ? i.replace(/(\\\"(.*)\\\")/, \"<span class='key $2'>$1</span>\") : i.replace(/(\\\".*\\\"|\\d{3,3}|null)/, \"<span class='item'>$1</span>\"));\n\n\t\tlet output = html;\n\n\t\tmatches.forEach((i, idx) => {\n\t\t\toutput = output.replace(new RegExp(escape(i), \"g\"), replaces[idx]);\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t// Prettifies a <code>\n\tfunction prettify (arg) {\n\t\t// Changing <pre> into selectable Elements\n\t\targ.parentNode.parentNode.innerHTML = prepare(arg.innerHTML)\n\t\t\t.replace(/\\n/g, \"<br>\\n\")\n\t\t\t.replace(/(\\s{2,2})/g, \"<span class='spaces'></span>\");\n\n\t\t// Changing URIs into anchors\n\t\tArray.from(document.querySelectorAll(\".item\")).forEach(i => {\n\t\t\tlet html = i.innerHTML,\n\t\t\t\tval = html.replace(/(^\\\"|\\\"$)/g, \"\");\n\n\t\t\tif (val.indexOf(\"/\") === 0 || val.indexOf(\"//\") > -1) {\n\t\t\t\thtml = html.replace(val, \"<a href='\" + val + \"' title='View \" + val + \"'>\" + val + \"</a>\");\n\t\t\t}\n\n\t\t\ti.innerHTML = html;\n\t\t});\n\t}\n\n\tfunction maybeJson (arg) {\n\t\tlet output = false;\n\n\t\tif (json.test(arg)) {\n\t\t\ttry {\n\t\t\t\tJSON.parse(JSON.stringify(arg));\n\t\t\t\toutput = true;\n\t\t\t} catch (err) {\n\t\t\t\tconsole.warn(err.message);\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t// Intercepting the submission\n\tform.onsubmit = ev => {\n\t\tev.preventDefault();\n\t\tev.stopPropagation();\n\n\t\twindow.requestAnimationFrame(() => {\n\t\t\tresBody.innerText = \"\";\n\t\t\tresBody.classList.add(\"dr-hidden\");\n\t\t\tloading.classList.remove(\"dr-hidden\");\n\t\t\tbutton.classList.add(\"is-loading\");\n\t\t\tmodal.classList.add(\"is-active\");\n\t\t});\n\n\t\tfetch(location.protocol + \"//\" + location.host + location.pathname, {method: methods.options[methods.selectedIndex].value, body: maybeJson(textarea.value) ? JSON.stringify(textarea.value) : textarea.value, credentials: \"include\", headers: {\"content-type\": maybeJson(textarea.value) ? \"application/json\" : \"application/x-www-form-urlencoded\", \"x-csrf-token\": document.querySelector(\"#csrf\").innerText}}).then(res => {\n\t\t\tif (!res.ok) {\n\t\t\t\tthrow res;\n\t\t\t}\n\n\t\t\treturn isJson.test(res.headers.get(\"content-type\") || \"\") ? res.json() : res.text();\n\t\t}).then(arg => {\n\t\t\twindow.requestAnimationFrame(() => {\n\t\t\t\tresBody.innerText = arg.data || arg;\n\t\t\t\tresBody.parentNode.classList.remove(\"has-text-centered\");\n\t\t\t\tresBody.classList.remove(\"dr-hidden\");\n\t\t\t\tloading.classList.add(\"dr-hidden\");\n\t\t\t\tbutton.classList.remove(\"is-loading\");\n\t\t\t});\n\t\t}).catch(res => {\n\t\t\twindow.requestAnimationFrame(() => {\n\t\t\t\tresBody.innerHTML = \"<h1 class=\\\"title\\\">\" + res.status + \" - \" + res.statusText + \"</h1>\";\n\t\t\t\tresBody.parentNode.classList.add(\"has-text-centered\");\n\t\t\t\tresBody.classList.remove(\"dr-hidden\");\n\t\t\t\tloading.classList.add(\"dr-hidden\");\n\t\t\t\tbutton.classList.remove(\"is-loading\");\n\t\t\t});\n\n\t\t\tconsole.warn(res.status + \" - \" + res.statusText);\n\t\t});\n\t};\n\n\tmethods.onchange = () => form.setAttribute(\"method\", methods.options[methods.selectedIndex].value);\n\n\t// Creating a DOM router\n\trouter({css: {current: \"is-active\", hidden: \"dr-hidden\"}, callback: ev => {\n\t\twindow.requestAnimationFrame(() => {\n\t\t\tArray.from(document.querySelectorAll(\"li.is-active\")).forEach(i => i.classList.remove(\"is-active\"));\n\t\t\tev.trigger.parentNode.classList.add(\"is-active\");\n\t\t});\n\t}});\n\n\t// Wiring up format selection\n\tclose.onclick = ev => {\n\t\tev.preventDefault();\n\t\tev.stopPropagation();\n\t\tbutton.classList.remove(\"is-loading\");\n\t\tmodal.classList.remove(\"is-active\");\n\t};\n\n\t// Wiring up format selection\n\tformats.onchange = ev => {\n\t\twindow.location = window.location.pathname + \"?format=\" + ev.target.options[ev.target.selectedIndex].value;\n\t};\n\n\t// Wiring up JSON validation\n\ttextarea.onkeyup = ev => {\n\t\tif (ev.target.value !== \"\") {\n\t\t\tev.target.classList.remove(\"is-danger\");\n\t\t\tbutton.classList.remove(\"is-disabled\");\n\t\t} else {\n\t\t\tev.target.classList.add(\"is-danger\");\n\t\t\tbutton.classList.add(\"is-disabled\");\n\t\t}\n\t};\n\n\t// Setting up the UI\n\twindow.requestAnimationFrame(() => {\n\t\t// Hiding the request tab if read-only\n\t\tif (!(/(PATCH|PUT|POST)/).test(document.querySelector(\"#allow\").innerText)) {\n\t\t\tdocument.querySelector(\"li.request\").classList.add(\"dr-hidden\");\n\t\t}\n\n\t\t// Resetting format selection (back button)\n\t\tformats.selectedIndex = 0;\n\n\t\t// Prettifying the response\n\t\tprettify(document.querySelector(\"#body\"));\n\t});\n\n\tconsole.log([\n\t\t\"        ,----,\",\n\t\t\"      ,/   .`|\",\n\t\t\"    ,`   .'  :\",\n\t\t\"  ;    ;     /\",\n\t\t\".'___,/    ,'              ,---,              ,---.\",\n\t\t\"|    :     |           ,-+-. /  | .--.--.    '   ,'\\\\\",\n\t\t\";    |.';  ;   ,---.  ,--.'|'   |/  /    '  /   /   |\",\n\t\t\"`----'  |  |  /     \\\\|   |  ,\\\"' |  :  /`./ .   ; ,. :\",\n\t\t\"    '   :  ; /    /  |   | /  | |  :  ;_   '   | |: :\",\n\t\t\"    |   |  '.    ' / |   | |  | |\\\\  \\\\    `.'   | .; :\",\n\t\t\"    '   :  |'   ;   /|   | |  |/  `----.   \\\\   :    |\",\n\t\t\"    ;   |.' '   |  / |   | |--'  /  /`--'  /\\\\   \\\\  /\",\n\t\t\"    '---'   |   :    |   |/     '--'.     /  `----'\",\n\t\t\"             \\\\   \\\\  /'---'        `--'---'\",\n\t\t\"              `----'\"\n\t].join(\"\\n\"));\n}(document, window, location, fetch, router));\n"]}